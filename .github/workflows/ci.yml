name: CI
on: [push]
jobs:
  Scheduled_Lighthouse_Test:
    name: Run Lighthouse
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Lighthouse on prod url and upload data to a private LHCI server.
        id: lighthouse
        uses: treosh/lighthouse-ci-action@v10
        with:
          configPath: ch-web-frontend/lighthouserc.json
          urls: |
            https://www.coinhako.com
          uploadArtifacts: true # save results as an action artifact
          temporaryPublicStorage: true # upload lighthouse report to the temporary storage
      - name: Notify when lighthouse score below expected
        run: |
          echo "this is the result ${{ steps.lighthouse.outputs.assertionresults }}"
          echo "this is the links ${{ steps.lighthouse.outputs.links }}"
          echo "this is the result path ${{ steps.lighthouse.outputs.resultspath }}"
